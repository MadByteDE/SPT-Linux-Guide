## SPT Lutris installer v2025.6-4 ##
## This Lutris installer is using the -OFFICIAL- SPT Windows installer.
description: 'Installs SPTarkov for you; EFT needs to be installed manually!'
notes: "Make sure the main game is installed inside the BSG Launcher before installing SPTarkov.\nCheck out the link for further details & assistance!"
credits: "https://github.com/MadByteDE/SPT-Linux-Guide"
game_slug: sptarkov
installer_slug: sptarkov-official-installer
name: SPTarkov - Launcher
runner: wine
script:
    files:
    - spt-installer:
        url: https://ligma.waffle-lord.net/SPTInstaller.exe
        filename: SPTInstaller.exe
    game:
        arch: win64
        exe: drive_c/SPTarkov/SPT.Launcher.exe
        prefix: $GAMEDIR
    requires: escape-from-tarkov
    installer:
    - task:
        app: arial times dotnetdesktop8 dotnetdesktop9
        arch: win64
        description: Installing game dependencies ...
        name: winetricks
        prefix: $GAMEDIR
    - task:
        app: win10
        arch: win64
        description: Setting windows version to Windows 10...
        name: winetricks 
        prefix: $GAMEDIR
    - task:
        arch: win64
        description: Launching SPTInstaller ...
        executable: spt-installer
        args: installpath="C:\SPTarkov"
        name: wineexec
    - task:
        name: winekill
    - write_file:
        description: Create prelaunch script ...
        file: $GAMEDIR/drive_c/SPTarkov/server.sh
        content: "#!/bin/bash\n
            [[ $(pidof \"SPT.Server.Linux\") != \"\" ]] && exit 0\n
            TERMS=(\"foot\" \"alacritty\" \"ptyxis\" \"konsole\" \"gnome-terminal\" \"xfce4-terminal\" \"kgx\" \"kitty\" \"xterm\")\n
            cd \"$GAMEDIR/drive_c/SPTarkov\"\n
            for term in \"${TERMS[@]}\"; do\n
            \tif command -v $term; then\n
            \t\t$term -e \"./SPT.Server.Linux\"\n
            \t\tbreak\n
            \tfi\n
            done"
    - chmodx: $GAMEDIR/drive_c/SPTarkov/server.sh
    # Installation complete
    install_complete_text: "All done! ※\\(^o^)/※\n
                     \n
                     Quick start:\n
                     1. Launch 'SPTarkov - Launcher'\n
                     2. Wait for the server to show 'Server has started, happy playing'\n
                     3. Connect, create a new profile & play\n
                     For the latest updates & mods, visit:\n
                     https://hub.sp-tarkov.com/\n
                     \n
                     Have fun! ('-')7"
    system:
        env:
            PROTON_VERB: run
            DOTNET_BUNDLE_EXTRACT_BASE_DIR:
            DOTNET_ROOT: 
    wine:
        overrides:
            winhttp: n,b
            # icu: d

slug: sptarkov
version: sptarkov-official-latest
year: 2017